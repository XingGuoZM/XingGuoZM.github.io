### 经验
1. 熟练掌握Javascript，能脱离框架进行原生开发，熟悉Typescript
2. 熟练使用React框架以及相关生态技术，能独立完成项目的搭建和项目部署
3. 熟悉浏览器原理以及计算机网络相关技术，在性能优化方面有较多实践经验
4. 对前端工程化/模块化有一定了解，熟悉webpack、rollup等打包工具及其日常开发配置，有过从0到1的独立搭建项目经验，并优化构建流程
5. 了解vue框架技术，有相关实践经验
6. 了解node.js和常用模块，能开发web服务器

前端单元测试，
前端集群项目

请求相关：axios、跨域、jsonp和跨域资源共享,nginx基本配置

### 大流量下前端页面优化

1. 服务器瘫痪，前端请求不到数据，对前端页面的容错容灾有更高的要求
2. 大流量意味着各种终端都可能存在，高中低端机适配，兼容性的要求
3. 服务器压力大，前端需要做一些措施,前端层面缓解服务器压力的方式有

请求数量精简（合并）：同类型文件/请求合并，例如请求合并，js、css模块合并，图片雪碧图等方式，合并影响下载速率

请求大小精简（压缩）：各种资源的压缩，例如js、css、html等文件进行去空格、精简变量名、哈夫曼编码操作，图片可以转换格式和图片压缩算法。压缩影响代码可读性，影响线上问题定位，压缩算法局限性会造成某些平台无法使用，兼容

缓存，分流请求：http cache、localstorage、离线包等，缓存影响资源时效性

针对以上优化手段，有利有弊，需要对其进行更细粒度的差异化分解，然后对每个部分使用最优的方式进行处理

### 兼容性
1. js代码的兼容性，例如Object.values的polyfill
2. 页面在不同设备的适配，例如1px问题、
3. 客户端时间和服务器时间一致性

### 项目难点（复杂度）

1. 问题一 :页面中有一个弹窗，弹窗关闭之后会有一段星星飞入的动画（requestAnimationFrame），当动画结束的时候，更新星星值。有些时候在这个弹窗中点击按钮会跳转到一个新页面（新开一个webview），然而再返回这个页面的时候会发现星星的总数没有变化
```
requestAnimationFrame在页面推入后台时会停止
```

2. 问题二：页面中很多卡片，分布在不同的模块中，每一个卡片有可能有视频或者社交信息（好友情况）也可能两个都有或者都没有。现在我们滚动页面，等我们停止滚动的时候，查找可视区域中的卡片，按照从上往下从左往右的顺序依次进行触发，如果是视频就自动播放，如果是社交信息就进行前后翻转，视频可以循环播放，翻转只翻转一次。
```

卡片组件 游戏图片+标题+按钮

视频容器+背面社交组件

hoc+forwardRef和useImperativeHandle来做业务管理
视频自动播放及结束回调（onEnded回调）
卡片翻转效果及结束回调（transitionend事件监听）

写一个全局行为管理类，滚动监听，动态更新当前可视区域的dom
```
3. 问题三：时长统计脚本，兼容性、包体积控制、扩展性、安全与作弊。
```
玩游戏的时间收集，要求兼容低端机、数据精确、安全、主页面无感知
每隔3s存一次localStorage累加、每隔15s心跳上报一次，设置一天上限时长
```

4. 问题四：倒计时准确性与统一性，倒计时误差
```
本地时间戳进行计算，倒计时不准
多个地方使用同一个倒计时组件，接收同一份数据。例如一个红包中有倒计时，等它滚动到不可见时，需要在页面顶部或者右下方展示一个倒计时的组件，这时候特别注意倒计时的统一问题

1. 网络延迟
2. 本地时间修改
3. setTimeout不够精准
```

5. 问题五：前端数字累加，数字动画,countup.js
```
1. toFixed精度问题
2. 动画未结束将页面压入后台，再回来时动画被其他动画打断。
场景：选择一个商品，可以跳转其他页面做任务，返回之后价格下降。页面刚加载完成时，先给商品将一次价格，通过countup.js完成一个价格下降的动画。在降价动画未完成时跳转页面去做任务了，完成之后返回这个页面，它需要有个价格的下调，但是这时候却发现价格没有变化。
3. 前端小数加减精度问题

如何解决
通过监听visibilitychange事件，在页面压入后台时，将价格reset，当docuemnt.visibilityState变为true时播放新数值动画
```

6. 问题六：react和rax在渲染过程中又触发了渲染，不会触发useEffect
```
react中的useEffect：messageChannel
rax中的useEffect：setTimeout
```

7. 问题七：rax useEffect不按照顺序执行
8. swiper,3d效果在iphone上闪
9. 模版引擎问题，图片、文案、样式等夹杂展示
```
场景：前端需要展示一条文案，但是文案中的有些数值、icon是变化的（需要后端返回），位置、数量和样式不确定。例如
"可获得✨x200"，200需要红色+加粗，可能还需要特殊字体
"200x✨可兑换1x🧧"，
"1x🧧最高可得2元"等等

难点：
1. 多个图片占位匹配
2. 样式自定义
```
10. 弹窗队列问题
```
场景：达到拆红包的门槛之后，我们会赠送一堆红包给用户，在页面上就看见一堆红包叠在一起，拆一个红包播放一个炫酷动画，增加余额。
难点：
1. 弹窗队列管理问题，
2. 前端数字相加精度问题
3. 拆红包的动画流畅度问题
```
11. 性能优化
```
性能优化涉及到的细节非常多，包含了系统打包、网络传输、页面渲染、代码优化等各个方面。我们的系统以电商为主，它的特点是流量比较大、图片字体视频各类静态资源比较多、用户人群主要是三四线的中老年人、手机主要以低端安卓手机为主。产品的关注点是留存率、停留时长，最重要的是下单率，技术上关注的是页面的性能优化和稳定性，性能优化根据业务诉求和产品特点来有针对性的开展工作，前端的性能优化关注的指标是页面的首屏时间和可交互时间，稳定性关注的指标是线上页面报错的情况以及用户投诉情况。
首先我们做的是app内嵌h5页面，我们的页面是依托客户端的webview的，最具h5页面特色优化是离线包和静态构建（页面预静态化），我们知道首屏时间主要是两部分组成，网络耗时和渲染耗时，因此离线包和静态构建就是为了专门应对这两个问题的解决方案。

离线包：主要作用就是减少网络耗时，预先将资源打离线包传到离线包平台中，当客户端启动之后和离线包平台进行版本对比，动态更新离线包。此时离线包就下载到客户端本地了。当webview真正去加载某个h5页面的时候，拦截请求并且查看该资源是否存在于本地，存在的话就可以从本地加载页面了。大致原理是第一个版本会预置到客户端的安装包里，同时会上传到离线包平台上，该平台除了可以保存离线包之外还会生成一个包含关于该离线包信息的json文件（packageIndex），包含版本、url地址等信息。当我们的项目发布新版本时候，会通过一个webpack插件（offline-package-webpack-plugin）打包出一个新的离线包。这个时候我们把离线包上传到离线包平台，那么保存离线包的json文件就会发生变化（版本更新），等到客户端启动并请求最新的packageIndex文件时,发现离线包 main 的版本比本地对应离线包的版本大时，会从离线包平台下载最新的版本，并以此作为查询本地静态资源文件的资源池。当然可以对新旧两个离线包进行diff算出差异得出差分包，客户端只需要下载差分包了。

静态构建：静态构建类似于服务端渲染，它是在构建的时候借助webpack插件和react原生的服务端渲染能力生成相对完善html的dom结构。我们可以通过 webpack插件将一些特定页面在编译时就注入DOM结构，这样做有几个好处：第一缩短页面白屏时间，第二相对于服务器端渲染节省云基础设施资源成本，第三输出给搜索引擎爬取页面通用内容。通过webpack插件系统获取每次构建的compilation上下文，通过html-webpack-plugin的before AssetTagGeneration hook获取当前页面bundle，afterTemplateExecution hook获取当前页面编译后的模板HTML，通过eval执行bundle导出的整个页面APP模块，通过ReactDomServer对单页应用的每个路由产出APP HTML与模板HTML合并后落盘为预静态化的HTML。

其他都是一些基本常规的优化操作，需要有相对完善的前端知识做支撑。例如
团队协作，网络相关优化涉及后端相关人员，静态资源如图片、视频、动画、字体等涉及视觉相关人员

代码优化
1. React
2. 静态资源，如图片、视频
3. 
打包优化
1. tree-shaking
2. 静态构建
3. 
网络优化
1. DNS优化：DNS预获取（掩盖DNS解析延迟）、DNS缓存（减少DNS查询次数）
2. 静态资源CDN缓存
3. 开启HTTP缓存
4. 首屏请求：预请求（head-prefetch）、错误重试（3次），
渲染优化

```
12. 国际化、本地化、全球化
```
国际化：又称i18n，指的是在产品研发设计过程中进行预先准备，使产品能够在最低的调整成本下最快速地适应全球需求，可以使用同一套代码在不同国家和地区发布和应用，因此国际化相对本地化来说关注的是产品或者服务更底层的内核是否能国际通用。重要的几个方面：
1. 编码格式：很多传统的编码标准仅能适配一些特定的拉丁字母语言，但如果要同时兼容很多不同类型且差异巨大的东西方语言时，Unicode会是国际化过程中更好的选择。如utf-8
2. 语言适配：语言和文化差异的适配性，比如
语言长度：相同语境下东亚语言呈现的长度相对较短，所占空间较小，而拉丁字母和西里尔字母语言所占用的空间会明显增加

3. 数据适配：在产品国际化的过程中，需要提前考虑不同国家的各类数据格式和属性，并做好充分的预留和准备。比如：
时区问题：时间的显示涉及到时区配置，国际化的过程中一般会首先内部采用统一的UTC时间，然后再转换成特定的用户时区；
电话问题：电话号码前面加入可选的国际区号，
邮编问题：邮编允许字母和数字混合输入
等等，都是产品国际化过程中必须要做的准备

国际化的产品基本上图片居多，采用全图式的说明书类型，这样不但大大节省了多语言翻译的成本开支，同时还将原本繁琐的文字阅读体验简化成了老少皆宜的“依样画葫芦”

本地化：又称l10n，是指将一种产品或服务改造适配使之能够适应特定地域的过程。在很多全球业务比较成熟的大型企业中，本地化和国际化是相辅相成的两个关联过程，一个产品在具备国际化的内核与架构之后，本地化相关的工作才能得以展开
1. 语言的本地化，翻译是本地化最基础的一个环节，除了多语言翻译之外还有其他的语言习惯。例如有些国家的阅读习惯是从右到左，所以前端要做RTL的适配
2. 文化的本地化，根据各国的文化传统，适配当地的文化观念也是重要的一环。比如我国的投资观念中，红色表示上涨和发展，绿色表示下跌和衰退。而在欧美国家恰恰相反的。此外在数据层面的单位、日期格式、货币单位等等，也都是需要重点关注的本地化项目
3. 功能本地化，即功能的本地化调整，例如欧美用户在社交平台分享内容不能只有微博微信选项，如果国外一个拥有支付功能的app想进入中国就一定得支持支付宝或者微信。
4. 合规，产品都需要做大量的合规性准备工作以适应不同地域的各种标准和规范。

全球化：技术层面包含了国际化和本地化。全球化代表的是一整套从产品研发到全球营销落地的完整产品与服务流程，从更高的视野关注从产品研发管理、市场营销、售后支持，乃至国际贸易等等各个环节的相互关联和整体布局。而从操作层面上来看全球化有可能涉及的具体内容包括不限于供应链条、渠道合作、售后服务、仓储物流、特许经营、合规通关等等。因此换句话说，优秀的全球化实践是为了向不同地区的用户提供更好的“客户旅程（customer journey）”体验。


相关的技术问题
1. 文案问题（i18n）、编码问题
2. 货币问题
3. 样式问题，布局问题
4. 时区问题、电话、邮编问题
5. 功能适配问题

```
13. 埋点方案
```
确定表示某个模块的方式，spma.b.c.d
上报方式，批量上报，本地存储，
```

14. 点赞功能，一个人可以点击多次，页面展示所有人点赞的总和
15. 如何设计一个秒杀前端系统
```
秒杀系统的特点：高峰时间短、大量用户抢少量商品

前端可以做一些措施来分担服务器的压力，第一个过滤无效请求，第二个是CDN
可以从以下几个方面入手
1. 页面静态化：秒杀活动页面绝大多数内容是固定的，比如：商品名称、商品描述、图片等。为了减少不必要的服务端请求，通常情况下，会对活动页面做静态化处理。用户浏览商品等常规操作，并不会请求到服务端。只有到了秒杀时间点，并且用户主动点了秒杀按钮才允许访问服务端。
2. 使用CDN，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率
3. 秒杀按钮置灰，活动前不可点击的，活动开始时可以听过替换cdn上的js包来开启按钮点击，点击之后10s之内不能再点击
```
16. 从0到1搭建内部组件库,如何设计
```
```
17. 随机数
```
react useId

Math.random

```

### 项目收获和技术迁移
性能优化：首屏优化、公共组件
全面考虑：错误情况、边界情况
页面兼容：

hybrid h5

### 组件封装
- 实现一个自由拖动组件
- 实现一个多弹窗管理组件
- 实现一个虚拟列表

### 常见面试题
1. 重复提交
2. 请求先后顺序？先请求后响应问题？
3. 数据解析和页面缓存
4. 路由懒加载
5. 前端的存储方案
6. 断网/弱网处理
7. 白屏
8. 组件封装
9. 数据持久化
10. 性能优化-图片处理
11. 命令式弹窗组件
```
1. 任意页面函数式调用，全局管理，createRoot创建一个新的root，并用context的provider套一层
2. 数据传递和弹窗间通信问题，每个弹窗组件使用promise管理，
3. 弹窗并存和覆盖问题
4. 弹窗并存：最大数量控制、队列管理和优先级管理
5. 每一个弹窗生命周期管理
6. 弹窗管理优化，弹窗节点的复用、
7. 判断是否遮挡
```
12. 关于精度问题，数值精度问题和时间精度问题，客户端时间和服务器时间的一致性
13. react如何catch错误的（window.addEventListener('error')）
14. react重渲染次数的最大值（25次）

### 第三方库
1. 轮播，swiper.js
2. 动画，anime.js、countup.js、lottie-web
3. promise，bluebird.js
4. 组件库，antd
5. 表格，react-table、rc-table、formik
6. 状态管理，redux、mobx、rx.js
7. 类react，preact、inferno、Nerv
8. 命令弹窗，@ebay/nice-modal-react、


### 前端方向
1. 图形、视频编辑器，相关框架PixiJs、ThreeJs、FabricJs
2. 低代码，相关框架LowercodeEngine
3. 微前端，相关框架qiankun